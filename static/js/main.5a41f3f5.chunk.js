(this["webpackJsonpconversion-app"]=this["webpackJsonpconversion-app"]||[]).push([[0],{181:function(e,t,a){e.exports=a(399)},186:function(e,t,a){},187:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"ratesSaga",(function(){return Y})),a.d(n,"transactionsSaga",(function(){return H}));var r=a(0),c=a.n(r),o=a(14),i=a.n(o),s=(a(186),a(187),a(165)),l=a(447),u=a(443),m=a(435),d=a(64),p=a.n(d),f=Object(m.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"left"},lightBlue:{backgroundColor:p.a[50]},textBold:{fontWeight:e.typography.fontWeightBold},textSecondary:{backgroundColor:p.a[100],color:e.palette.text.secondary},appTitle:{fontSize:e.typography.pxToRem(25),color:e.palette.grey.light},fullWidth:{width:"100%"}}})),g=a(40),E=a(112),h=a(61),b=a.n(h),y={base:"EUR",targetCurrency:"PLN",rates:null,transactions:null};function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CHANGE_RATE":return O({},a,{rates:O({},a.rates,Object(E.a)({},n.data.currency,n.data.value))});case"SET_RATES":return O({},a,{rates:n.data});case"SET_TRANSACTIONS":return console.log("Data from reducer:",n.data),O({},a,{transactions:n.data});case"CHANGE_TARGET":return O({},a,{targetCurrency:n.data});case"ADD_TRANSACTION":return O({},a,{transactions:a.transactions.concat(n.data)});case"DELETE_TRANSACTION":return O({},a,{transactions:(e=a.transactions,t=n.data,e.filter((function(e){return e!==t})))});default:return a}}var C=a(166),x=a(65),T=a.n(x),N=a(42),S=a(90),w=a.n(S),A="CHANGE_RATE",k="CHANGE_TARGET",P="ADD_TRANSACTION",R="DELETE_TRANSACTION",I="SET_RATES",W="SET_TRANSACTIONS",D=a(91),B=a(92),F=a(24),_=a(159),L=function(){function e(t){Object(D.a)(this,e),this.toastId=t||"mainToastId",this.timeOut=2e3,this.transitionClass=Object(_.css)({transform:"rotateY(360deg)",transition:"transform 0.6s"})}return Object(B.a)(e,[{key:"info",value:function(e){Object(F.b)(e,{type:F.b.TYPE.INFO,autoClose:this.timeOut,toastId:this.toastId})}},{key:"inProgress",value:function(e){Object(F.b)(e||"Please wait...",{autoClose:!1,type:F.b.TYPE.DEFAULT,toastId:this.toastId})}},{key:"updateProgress",value:function(e){F.b.update(this.toastId,{render:e,autoClose:!1,type:F.b.TYPE.DEFAULT,className:this.transitionClass})}},{key:"update",value:function(e){F.b.update(this.toastId,{render:e,autoClose:this.timeOut,type:F.b.TYPE.SUCCESS,className:this.transitionClass})}},{key:"updateError",value:function(e){F.b.update(this.toastId,{render:e,autoClose:!1,type:F.b.TYPE.ERROR,className:this.transitionClass})}},{key:"updateSuccess",value:function(e){F.b.update(this.toastId,{render:e,autoClose:this.timeOut,type:F.b.TYPE.SUCCESS,className:this.transitionClass})}}]),e}(),U=T.a.mark(Y);function Y(){var e,t,a;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new L("ratesToaster"),console.log("Starting fetching data..."),n.next=4,e.inProgress("Fetching rates...");case 4:return n.next=6,Object(N.b)(w.a,"https://api.exchangeratesapi.io/latest");case 6:return t=n.sent,n.next=9,Object(N.a)(t,t.json);case 9:return a=n.sent,n.next=12,Object(N.c)({type:I,data:a.rates});case 12:return console.log("State changed with newest rates"),n.next=15,e.updateSuccess("Newest rates fetched");case 15:case"end":return n.stop()}}),U)}var G=T.a.mark(H);function H(){var e,t,a;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=new L("TransactionToaster")).inProgress("Fetching transactions..."),n.next=4,Object(N.b)(w.a,"".concat("http://localhost:4000/api","/transactions"));case 4:return t=n.sent,n.next=7,Object(N.a)(t,t.json);case 7:return a=n.sent,n.next=10,Object(N.c)({type:W,data:a});case 10:console.log("State changed with newest transactions"),e.updateSuccess("Transaction fetched");case 12:case"end":return n.stop()}}),G)}var M=function(e){Object.values(n).forEach(e.run.bind(e))},q=function(){var e=Object(C.a)(),t=[e],a=[g.a.apply(void 0,t)],n=g.c.apply(void 0,a),r=Object(g.d)(j,y,n);return M(e),r}(),J=a(440),z=a(439),$=a(17),K=a(168),Q=a(167),V=a(160),X=a(169),Z=a(437),ee=function(e){return function(t){function a(){return Object(D.a)(this,a),Object(Q.a)(this,Object(V.a)(a).apply(this,arguments))}return Object(X.a)(a,t),Object(B.a)(a,[{key:"render",value:function(){var t=this.props,a=t.loading,n=Object(K.a)(t,["loading"]);return a?c.a.createElement(Z.a,null):c.a.createElement(e,n)}}]),a}(r.Component)};var te=Object($.b)((function(e){return{transactions:e.transactions}}))((function(e){var t=e.transactions,a=ee(z.a);return c.a.createElement(J.a,null,c.a.createElement(a,{loading:null===t},e.children))})),ae=a(446),ne=Object(m.a)((function(e){return{chip:{marginLeft:e.spacing(2),marginRight:e.spacing(2),color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold}}})),re=a(449),ce=a(451);function oe(e){return Number(e).toFixed(2)}var ie=Object($.b)((function(e,t){return{transactions:e.transactions,base:e.base}}))((function(e){var t=ne(),a=f(),n=void 0!=e.transactions&&0!==e.transactions.length,r=n?e.transactions.reduce((function(e,t){return parseFloat(oe(e.amount))>parseFloat(oe(t.amount))?e:t})).amount:oe(0),o=e.base,i=n?e.transactions.reduce((function(e,t){return parseFloat(e)+parseFloat(t.amount)}),0):oe(0);return c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{display:"flex",alignSelf:"flex-end"},c.a.createElement(ce.a,{className:[t.chip,a.lightBlue].join(" "),color:"secondary",id:"highest-amount",label:"Highest transaction amount: ".concat(oe(r)," ").concat(o)}),c.a.createElement(ce.a,{className:[t.chip,a.lightBlue].join(" "),color:"secondary",id:"total-amount",label:"Transactions total amount: ".concat(oe(i)," ").concat(o)})))})),se=a(400),le=a(452),ue=Object(m.a)((function(e){return{targetCurrency:{backgroundColor:p.a[100],fontWeight:e.typography.fontWeightBold,border:"5px solid ".concat(p.a[100]),borderRadius:e.spacing(1)}}}));var me=Object($.b)((function(e){return{rates:e.rates,targetCurrency:e.targetCurrency}}))((function(e){var t=e.currency,a=e.rate,n=e.targetCurrency,r=ue();return c.a.createElement(le.a,{id:t,key:t,label:t,value:oe(a),onChange:function(t){return function(t){var a=t.target.value>.01?t.target.value:.01,n=t.target.id;e.dispatch({type:A,data:{value:a,currency:n}})}(t)},type:"number",className:t===n?r.targetCurrency:null,InputLabelProps:{shrink:!0},margin:"none",variant:"standard"})}));var de=Object($.b)((function(e){return{rates:e.rates}}))((function(e){var t=e.rates,a=Object.keys(t),n=f();return c.a.createElement(se.a,{className:n.paper},c.a.createElement(u.a,{container:!0,spacing:2},a.map((function(e,a){return function(e,a){return c.a.createElement(u.a,{item:!0,key:"".concat(e,"-container-").concat(a),xs:2,md:6,lg:4},c.a.createElement(me,{currency:e,rate:Number(t[e])}))}(e,a)}))))})),pe=a(53),fe=a(455),ge=a(454),Ee=a(448),he=Object(m.a)((function(e){return{formControl:{width:"100%"}}}));var be=Object($.b)((function(e){return{rates:e.rates,targetCurrency:e.targetCurrency}}))((function(e){var t=he(),a=f(),n=e.targetCurrency,r=e.rates,o=c.a.useRef(null),i=c.a.useState(0),s=Object(pe.a)(i,2),l=s[0],u=s[1];return c.a.useEffect((function(){u(o.current.offsetWidth)}),[]),c.a.createElement(se.a,{className:a.paper},c.a.createElement(ge.a,{variant:"outlined",className:t.formControl},c.a.createElement(fe.a,{ref:o,htmlFor:"target-currency-dropdown"},"Target Currency"),c.a.createElement(Ee.a,{id:"currency-select",native:!0,fullWidth:!0,value:n,onChange:function(t){return a=t,void e.dispatch({type:k,data:a.target.value});var a},labelWidth:l,inputProps:{name:"Target-Currency",id:"target-currency-dropdown"}},Object.keys(r).map((function(e,t){return c.a.createElement("option",{key:t,value:e},e)})))))}));var ye=Object($.b)((function(e){return{rates:e.rates}}))((function(e){var t=f(),a=e.rates,n=ee(be),r=ee(de);return c.a.createElement(se.a,{className:[t.paper,t.lightBlue].join(" ")},c.a.createElement("h2",null,"Conversions"),c.a.createElement(n,{loading:null===a}),c.a.createElement(u.a,{container:!0,display:"flex","flex-direction":"row "},c.a.createElement(r,{loading:null===a})))})),ve=a(161),Oe=a.n(ve),je=a(444);var Ce=Object($.b)((function(e){return{transactions:e.transactions}}))((function(e){var t=f(),a=c.a.useState(""),n=Object(pe.a)(a,2),r=n[0],o=n[1],i=c.a.useState(""),s=Object(pe.a)(i,2),l=s[0],m=s[1],d=function(e){return null===e||0===e.trim().length},p=function(e){return null!==e&&!isNaN(e)&&0!==e},g=function(e){return null!==e&&e.length<50};return c.a.createElement(Oe.a,{onSubmit:function(){g(l)&&p(r)&&(o(r),m(l),e.dispatch({type:P,data:{amount:parseFloat(oe(r)),title:l,timestamp:b()(b.a.now()).clone(),base:"EUR",person:"Some special guy who uses this app"}}),o(""),m(""))}},c.a.createElement(u.a,{container:!0,alignItems:"center",spacing:2},c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(le.a,{required:!0,id:"transaction-form-amount",label:"EUR",value:r,onChange:function(e){d(e.target.value)?o(""):o(e.target.value)},className:t.fullWidth,margin:"dense",variant:"outlined",error:!p(r)})),c.a.createElement(u.a,{item:!0,xs:7},c.a.createElement(le.a,{required:!0,id:"transaction-form-title",label:"Title",value:l,onChange:function(e){d(e.target.value)?m(""):m(e.target.value)},className:t.fullWidth,margin:"dense",variant:"outlined",error:!g(l)})),c.a.createElement(u.a,{item:!0,xs:3},c.a.createElement(je.a,{type:"submit",className:t.fullWidth,color:"primary",variant:"contained"},"Add transaction"))))})),xe=a(450),Te=a(445),Ne=a(456),Se=a(164),we=a.n(Se),Ae=a(162),ke=a.n(Ae),Pe=a(163),Re=a.n(Pe),Ie=Object(m.a)((function(e){return{amountPlus:{color:ke.a[500]},amountMinus:{color:Re.a[500]}}}));function We(e){var t=e.currency,a=e.amount,n=f(),r=Ie();return c.a.createElement("div",{className:[n.textBold,function(e){return e>0?r.amountPlus:r.amountMinus}(a)].join(" ")},oe(a)," ",t)}var De=Object($.b)((function(e){return{targetCurrency:e.targetCurrency,rates:e.rates}}))((function(e){var t,a=f(),n=e.transaction,r=e.index,o=e.targetCurrency,i=e.rates[o],s=c.a.useState(!1),l=Object(pe.a)(s,2),m=l[0],d=l[1];return c.a.createElement(xe.a,{expanded:m,onChange:function(){return d(!m)},key:"transaction-".concat(n.timestamp)},c.a.createElement(Ne.a,{expandIcon:c.a.createElement(we.a,null),"aria-controls":"panel-content-"+r,id:"panel-header-"+r},c.a.createElement(u.a,{container:!0},c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(We,{amount:n.amount,currency:n.base})),c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(We,{amount:i*n.amount,currency:o})),c.a.createElement(u.a,{item:!0,xs:8,className:a.textBold},n.title))),c.a.createElement(Te.a,null,c.a.createElement(u.a,{container:!0,display:"flex",alignContent:"center",spacing:1},c.a.createElement(u.a,{item:!0,xs:5},c.a.createElement(le.a,{id:"timestamp-"+r,label:"Timestamp",value:b()(n.timestamp).format("llll"),className:a.fullWidth,margin:"dense",variant:"outlined"})),c.a.createElement(u.a,{item:!0,xs:5},c.a.createElement(le.a,{id:"person-"+r,label:(t=n.amount,function(e){return e>0}(t)?"Received from":"Sent to"),value:n.person,className:a.fullWidth,margin:"dense",variant:"outlined"})),c.a.createElement(u.a,{item:!0,container:!0,display:"flex",alignItems:"center",justify:"flex-end",xs:2},c.a.createElement(je.a,{color:"secondary",variant:"contained",onClick:function(){return function(t){e.dispatch({type:R,data:t})}(n)}},"DELETE")))))}));function Be(e){var t=e.align||"left",a=f();return c.a.createElement(ae.a,{align:t,className:[a.textSecondary,a.textBold].join(" ")},e.children)}function Fe(e){var t=e.base,a=e.targetCurrency;return c.a.createElement(u.a,{container:!0,spacing:1},c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(Be,null,"Amount [".concat(t,"]"))),c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(Be,null,"Amount [".concat(a,"]"))),c.a.createElement(u.a,{item:!0,xs:6},c.a.createElement(Be,null,"Title")),c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(Be,{align:"right"},"Details")))}var _e=Object($.b)((function(e){return{transactions:e.transactions,targetCurrency:e.targetCurrency,rates:e.rates,base:e.base}}))((function(e){var t=e.transactions,a=f(),n=e.base,r=e.targetCurrency;return c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(se.a,{className:[a.paper,a.textSecondary,a.textBold].join(" ")},c.a.createElement(Fe,{base:n,targetCurrency:r})),t.map((function(e,t){return c.a.createElement(De,{transaction:e,key:e.timestamp,index:t})})))}));var Le=Object($.b)((function(e){return{loading:e.loading,transactions:e.transactions}}))((function(e){e.loading;var t=e.transactions,a=f(),n=ee(_e);return c.a.createElement(se.a,{className:[a.paper,a.lightBlue].join(" ")},c.a.createElement("h2",null,"Transactions"),c.a.createElement("h3",null,"Create new"),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(se.a,{className:[a.paper,a.form].join(" ")},c.a.createElement(Ce,null))),c.a.createElement("h3",null,"History"),c.a.createElement(n,{loading:null===t||void 0==t}))}));function Ue(){var e=f();return c.a.createElement($.a,{store:q},c.a.createElement(te,null,c.a.createElement(re.a,{className:e.fullWidth,display:"flex",flexDirection:"row",justifyContent:"space-between"},c.a.createElement(ae.a,{variant:"h1",className:e.appTitle},"My wallet"),c.a.createElement(ie,null))),c.a.createElement(re.a,{p:2,my:5,py:5},c.a.createElement(u.a,{container:!0,spacing:3},c.a.createElement(u.a,{item:!0,xs:12,md:9},c.a.createElement(Le,null)),c.a.createElement(u.a,{item:!0,xs:12,md:3},c.a.createElement(ye,null)))))}a(398);var Ye=Object(s.a)({});var Ge=function(){return console.log("rates api:","https://api.exchangeratesapi.io/latest"),c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{theme:Ye},c.a.createElement("div",{className:"App"},c.a.createElement(Ue,null))),c.a.createElement(F.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.5a41f3f5.chunk.js.map